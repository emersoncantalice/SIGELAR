<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>SIGELAR - Login</title>
	<h:outputStylesheet library="css" name="estilo.css" />
	<link rel="shortcut icon" type="image/x-icon"
		href="#{resource['images/icon.jpg']}" />
	<style type="text/css">
.ui-widget {
	font-size: 10px;
	!
	important;
}
</style>
	<script>

    var http_request = false;

    function makeRequest(url) {
        http_request = false;
        console.log(window.XMLHttpRequest);
        if (window.XMLHttpRequest) { // Mozilla, Safari,...
            http_request = new XMLHttpRequest();
            if (http_request.overrideMimeType) {
                http_request.overrideMimeType('text/xml');
            }
        } else if (window.ActiveXObject) { // IE
            try {
                http_request = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    http_request = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {}
            }
        }

        if (!http_request) {
            alert('Giving up :( Cannot create an XMLHTTP instance');
            return false;
        }
        http_request.onreadystatechange = alertContents;
        http_request.open('GET', url, true);
        http_request.send(null);

    }

    function alertContents() {
        if (http_request.readyState == 4) {
            if (http_request.status == 0) {
                alert("Email enviado, verifique sua caixa de entrada.");
            } else if (http_request.status == 204) {
                alert("O email informado não foi encontrado.");
            } else {
                alert("Informe um email para solicitar.");
            }
        }

    }
</script>
</h:head>

<h:body styleClass="fundo_login">
	<p:dialog header="Esqueci minha senha" id="dialog" responsive="true"
		closable="false" showEffect="shake" styleClass="login"
		draggable="true" resizable="false" visible="true">
		<p:panelGrid columns="1" styleClass="ui-panelgrid-blank">

			<form>

				<h:outputLabel value="Insira o email cadastrado no sistema" />
				<input id="email" size="70" />

				<h:outputText id="msg" style="color: red; font-size: small;" />

				<p:outputPanel style="width: 100%; text-align:center">
					<h:outputLabel
						value="Será enviado um email com a nova senha para o email informado" />
					<br />
					<h:button outcome="/login.xhtml" value="Voltar"></h:button>
					<h:button id="button"
						onclick="makeRequest(document.location='http://localhost:8080/SIGELAR/Restful/esqueci_senha/'+document.getElementById('email').value)"
						value="Solicitar" />
					<br />
				</p:outputPanel>


			</form>
		</p:panelGrid>
	</p:dialog>

</h:body>
</html>
